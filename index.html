<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan CMMS BUMDes Cikahuripan Makmur Mandiri Sejahtera Cikahuripan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%); }
        .dashboard-gradient { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 25%, #6ee7b7 50%, #34d399 75%, #10b981 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-6">
                    <!-- Logo BUMDes -->
                    <div class="bg-white p-3 rounded-full shadow-lg">
                        <svg width="60" height="60" viewBox="0 0 100 100" class="text-green-600">
                            <circle cx="50" cy="50" r="45" fill="#10b981" stroke="#ffffff" stroke-width="3"/>
                            <text x="50" y="35" text-anchor="middle" fill="white" font-size="12" font-weight="bold">BUMDes</text>
                            <text x="50" y="50" text-anchor="middle" fill="white" font-size="10" font-weight="bold">CMMSC</text>
                            <text x="50" y="65" text-anchor="middle" fill="white" font-size="8">2024</text>
                            <path d="M25 75 L50 65 L75 75" stroke="white" stroke-width="2" fill="none"/>
                        </svg>
                    </div>
                    
                    <!-- Logo Desa -->
                    <div class="bg-white p-3 rounded-full shadow-lg">
                        <svg width="60" height="60" viewBox="0 0 100 100" class="text-yellow-600">
                            <circle cx="50" cy="50" r="45" fill="#f59e0b" stroke="#ffffff" stroke-width="3"/>
                            <polygon points="50,20 35,40 65,40" fill="white"/>
                            <rect x="40" y="40" width="20" height="25" fill="white"/>
                            <rect x="45" y="50" width="4" height="8" fill="#f59e0b"/>
                            <circle cx="42" cy="54" r="1" fill="#f59e0b"/>
                            <text x="50" y="80" text-anchor="middle" fill="white" font-size="8" font-weight="bold">DESA</text>
                        </svg>
                    </div>
                    
                    <div>
                        <h1 class="text-2xl md:text-3xl font-bold">BUMDes Cikahuripan Makmur Mandiri Sejahtera Cikahuripan (CMMSC)</h1>
                        <p class="text-green-100 mt-1 text-sm md:text-base">Desa Cikahuripan, Kec. Klapanunggal, Kab. Bogor - Jawa Barat</p>
                        <p class="text-green-100 text-xs md:text-sm">Jl. Klapanunggal - Bojong, Kp. Palahlar RT. 019/008</p>
                        <p class="text-green-100 text-xs md:text-sm">üìß cmms.cikahuripan@gmail.com | üì± 082125415593</p>
                        <p class="text-green-100 mt-2 text-sm">Sistem Laporan CMMS - Computerized Maintenance Management System</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm text-green-100">Periode Laporan</p>
                    <p class="text-xl font-semibold text-white" id="currentDate"></p>
                </div>
            </div>
        </div>
    </header>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">üîê Login Sistem CMMS</h2>
            <form onsubmit="handleLogin(event)">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                    Login
                </button>
            </form>
            <div class="mt-4 text-sm text-gray-600 text-center">
                <p class="text-gray-500">Masukkan username dan password yang valid</p>
            </div>
            
            <!-- Demo Akun - Hanya tampil untuk admin/direktur -->
            <div id="demoAccounts" class="mt-4 text-sm text-gray-600 hidden">
                <p><strong>‚úÖ Demo Akun yang Tersedia:</strong></p>
                <div class="bg-gray-50 p-3 rounded-lg mt-2 space-y-1">
                    <p><strong>Direktur:</strong> direktur / admin123</p>
                    <p><strong>Unit Internet:</strong> internet / unit123</p>
                    <p><strong>Unit Toko:</strong> toko / unit123</p>
                    <p><strong>Unit Kios:</strong> kios / unit123</p>
                    <p><strong>Unit Lapak:</strong> lapak / unit123</p>
                    <p><strong>Unit Lapangan:</strong> lapangan / unit123</p>
                    <p><strong>Unit Sampah:</strong> sampah / unit123</p>
                    <p><strong>Unit Ayam:</strong> ayam / unit123</p>
                </div>
                <p class="text-xs text-red-600 mt-2">‚ö†Ô∏è Pastikan username dan password diketik persis seperti contoh di atas</p>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-6 py-8" id="mainContent" style="display: none;">
        <!-- User Info & Logout -->
        <div class="bg-white rounded-xl shadow-md p-4 mb-6 flex justify-between items-center">
            <div>
                <p class="text-sm text-gray-600">Login sebagai:</p>
                <p class="font-semibold text-gray-800" id="userInfo"></p>
            </div>
            <div class="flex space-x-2">
                <button onclick="showDemoAccounts()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors" id="demoBtn" style="display: none;">
                    üìã Demo Akun
                </button>
                <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                    üö™ Logout
                </button>
            </div>
        </div>

        <!-- Navigation Menu -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üìä Menu Sistem</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="navigationMenu">
                <!-- Menu akan diisi berdasarkan role user -->
            </div>
        </div>

        <!-- Content Area -->
        <div id="contentArea">
            <!-- Default Summary View -->
            <div id="summary" class="unit-content">
                <div class="dashboard-gradient p-6 rounded-xl mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">üìä Dashboard BUMDes CMMSC</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Pendapatan</p>
                                <p class="text-2xl font-bold text-green-600">Rp 55.500.000</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <span class="text-2xl">üí∞</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Biaya Maintenance</p>
                                <p class="text-2xl font-bold text-red-600">Rp 8.250.000</p>
                            </div>
                            <div class="bg-red-100 p-3 rounded-full">
                                <span class="text-2xl">üîß</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Laba Bersih</p>
                                <p class="text-2xl font-bold text-blue-600">Rp 34.750.000</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <span class="text-2xl">üìä</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Efisiensi Maintenance</p>
                                <p class="text-2xl font-bold text-purple-600">82%</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <span class="text-2xl">‚ö°</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üìà Grafik Pendapatan per Unit</h3>
                    <canvas id="revenueChart" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- Admin Panel -->
            <div id="adminPanel" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">‚öôÔ∏è Panel Admin - Kelola Sistem</h3>
                    
                    <!-- Admin Menu Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-blue-50 p-6 rounded-lg border border-blue-200">
                            <h4 class="font-bold text-blue-800 mb-3">üë• Kelola User</h4>
                            <button onclick="showUserManagement()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm w-full mb-2">
                                Kelola Akun User
                            </button>
                            <button onclick="showUserActivity()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm w-full">
                                Log Aktivitas User
                            </button>
                        </div>
                        
                        <div class="bg-green-50 p-6 rounded-lg border border-green-200">
                            <h4 class="font-bold text-green-800 mb-3">üí∞ Kelola Data Keuangan</h4>
                            <button onclick="showFinanceEditor()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm w-full mb-2">
                                Edit Data Keuangan
                            </button>
                            <button onclick="showReportSettings()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm w-full">
                                Pengaturan Laporan
                            </button>
                        </div>
                        
                        <div class="bg-purple-50 p-6 rounded-lg border border-purple-200">
                            <h4 class="font-bold text-purple-800 mb-3">üè¢ Kelola Unit Usaha</h4>
                            <button onclick="showUnitManager()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm w-full mb-2">
                                Kelola Unit Usaha
                            </button>
                            <button onclick="showUnitReports()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm w-full">
                                Laporan Per Unit
                            </button>
                        </div>
                        
                        <div class="bg-red-50 p-6 rounded-lg border border-red-200">
                            <h4 class="font-bold text-red-800 mb-3">üîß Maintenance Sistem</h4>
                            <button onclick="showSystemMaintenance()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm w-full mb-2">
                                Maintenance Sistem
                            </button>
                            <button onclick="showBackupRestore()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm w-full">
                                Backup & Restore
                            </button>
                        </div>
                        
                        <div class="bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                            <h4 class="font-bold text-yellow-800 mb-3">üìä Analisis & Laporan</h4>
                            <button onclick="showAnalytics()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg text-sm w-full mb-2">
                                Dashboard Analytics
                            </button>
                            <button onclick="showCustomReports()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg text-sm w-full">
                                Custom Reports
                            </button>
                        </div>
                        
                        <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                            <h4 class="font-bold text-gray-800 mb-3">‚öôÔ∏è Pengaturan Sistem</h4>
                            <button onclick="showSystemSettings()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm w-full mb-2">
                                Pengaturan Umum
                            </button>
                            <button onclick="showSecuritySettings()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm w-full">
                                Keamanan Sistem
                            </button>
                        </div>
                    </div>
                    
                    <!-- Admin Content Area -->
                    <div id="adminContentArea" class="bg-gray-50 p-6 rounded-lg">
                        <p class="text-gray-600 text-center">Pilih menu admin di atas untuk mengelola sistem</p>
                    </div>
                </div>
            </div>

            <!-- Unit Internet -->
            <div id="internet" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">üåê Unit Internet</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Pendapatan Bulan Ini</h4>
                            <p class="text-2xl font-bold text-blue-600">Rp 12.500.000</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">Pelanggan Aktif</h4>
                            <p class="text-2xl font-bold text-green-600">245 User</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-800">Bandwidth Terpakai</h4>
                            <p class="text-2xl font-bold text-purple-600">78%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unit Toko -->
            <div id="toko" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">üè™ Unit Toko</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Omzet Bulan Ini</h4>
                            <p class="text-2xl font-bold text-blue-600">Rp 8.750.000</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">Produk Terjual</h4>
                            <p class="text-2xl font-bold text-green-600">1,234 Item</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-800">Margin Keuntungan</h4>
                            <p class="text-2xl font-bold text-purple-600">25%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unit Kios -->
            <div id="kios" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">üè¨ Unit Kios</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Pendapatan Sewa</h4>
                            <p class="text-2xl font-bold text-blue-600">Rp 6.000.000</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">Kios Terisi</h4>
                            <p class="text-2xl font-bold text-green-600">12/15 Unit</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-800">Tingkat Okupansi</h4>
                            <p class="text-2xl font-bold text-purple-600">80%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unit Lapak -->
            <div id="lapak" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">üõí Unit Lapak</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Pendapatan Sewa</h4>
                            <p class="text-2xl font-bold text-blue-600">Rp 3.300.000</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">Lapak Aktif</h4>
                            <p class="text-2xl font-bold text-green-600">22/25 Unit</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-800">Tingkat Okupansi</h4>
                            <p class="text-2xl font-bold text-purple-600">88%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unit Lapangan -->
            <div id="lapangan" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">‚öΩ Unit Lapangan</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Pendapatan Sewa</h4>
                            <p class="text-2xl font-bold text-blue-600">Rp 4.500.000</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">Jam Booking</h4>
                            <p class="text-2xl font-bold text-green-600">180 Jam</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-800">Tingkat Utilisasi</h4>
                            <p class="text-2xl font-bold text-purple-600">75%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unit Sampah -->
            <div id="sampah" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">‚ôªÔ∏è Unit Sampah</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Pendapatan</h4>
                            <p class="text-2xl font-bold text-blue-600">Rp 5.200.000</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">Sampah Dikelola</h4>
                            <p class="text-2xl font-bold text-green-600">15.5 Ton</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-800">Daur Ulang</h4>
                            <p class="text-2xl font-bold text-purple-600">65%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unit Ayam -->
            <div id="ayam" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">üêî Unit Ayam</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Pendapatan</h4>
                            <p class="text-2xl font-bold text-blue-600">Rp 15.500.000</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">Populasi Ayam</h4>
                            <p class="text-2xl font-bold text-green-600">2,500 Ekor</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-purple-800">Produksi Telur</h4>
                            <p class="text-2xl font-bold text-purple-600">1,800/Hari</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Laporan Keuangan -->
            <div id="laporanKeuangan" class="unit-content hidden">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">üí∞ Laporan Keuangan Lengkap</h3>
                    
                    <!-- Grid 4 Laporan -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <!-- Laba Rugi -->
                        <div class="bg-green-50 p-6 rounded-lg border border-green-200">
                            <h4 class="text-xl font-bold text-green-800 mb-4">üìà Laporan Laba Rugi</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>Total Pendapatan:</span>
                                    <span class="font-bold text-green-600">Rp 55.500.000</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Biaya Operasional:</span>
                                    <span class="font-bold text-red-600">Rp 12.500.000</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Biaya Maintenance:</span>
                                    <span class="font-bold text-red-600">Rp 8.250.000</span>
                                </div>
                                <hr class="my-2 border-green-300">
                                <div class="flex justify-between text-lg">
                                    <span class="font-bold">Laba Bersih:</span>
                                    <span class="font-bold text-green-700">Rp 34.750.000</span>
                                </div>
                                <div class="text-sm text-green-600 mt-2">
                                    Margin: 62.6% | ROI: 6.95%
                                </div>
                            </div>
                        </div>

                        <!-- Neraca -->
                        <div class="bg-blue-50 p-6 rounded-lg border border-blue-200">
                            <h4 class="text-xl font-bold text-blue-800 mb-4">üíº Neraca Keuangan</h4>
                            <div class="space-y-2">
                                <div class="font-semibold text-blue-700 mb-2">ASET:</div>
                                <div class="flex justify-between pl-4">
                                    <span>Kas & Bank:</span>
                                    <span class="font-bold">Rp 125.000.000</span>
                                </div>
                                <div class="flex justify-between pl-4">
                                    <span>Piutang:</span>
                                    <span class="font-bold">Rp 25.000.000</span>
                                </div>
                                <div class="flex justify-between pl-4">
                                    <span>Aset Tetap:</span>
                                    <span class="font-bold">Rp 450.000.000</span>
                                </div>
                                <div class="font-semibold text-blue-700 mt-3 mb-2">KEWAJIBAN:</div>
                                <div class="flex justify-between pl-4">
                                    <span>Hutang Usaha:</span>
                                    <span class="font-bold text-red-600">Rp 75.000.000</span>
                                </div>
                                <div class="flex justify-between pl-4">
                                    <span>Hutang Bank:</span>
                                    <span class="font-bold text-red-600">Rp 25.000.000</span>
                                </div>
                                <hr class="my-2 border-blue-300">
                                <div class="flex justify-between text-lg">
                                    <span class="font-bold">Modal Bersih:</span>
                                    <span class="font-bold text-blue-700">Rp 500.000.000</span>
                                </div>
                            </div>
                        </div>

                        <!-- Arus Kas -->
                        <div class="bg-purple-50 p-6 rounded-lg border border-purple-200">
                            <h4 class="text-xl font-bold text-purple-800 mb-4">üí∏ Laporan Arus Kas</h4>
                            <div class="space-y-2">
                                <div class="font-semibold text-purple-700 mb-2">OPERASIONAL:</div>
                                <div class="flex justify-between pl-4">
                                    <span>Penerimaan Kas:</span>
                                    <span class="font-bold text-green-600">Rp 52.300.000</span>
                                </div>
                                <div class="flex justify-between pl-4">
                                    <span>Pengeluaran Kas:</span>
                                    <span class="font-bold text-red-600">Rp 18.750.000</span>
                                </div>
                                <div class="font-semibold text-purple-700 mt-3 mb-2">INVESTASI:</div>
                                <div class="flex justify-between pl-4">
                                    <span>Pembelian Aset:</span>
                                    <span class="font-bold text-red-600">Rp 15.000.000</span>
                                </div>
                                <div class="font-semibold text-purple-700 mt-3 mb-2">PENDANAAN:</div>
                                <div class="flex justify-between pl-4">
                                    <span>Pinjaman Bank:</span>
                                    <span class="font-bold text-green-600">Rp 10.000.000</span>
                                </div>
                                <hr class="my-2 border-purple-300">
                                <div class="flex justify-between text-lg">
                                    <span class="font-bold">Arus Kas Bersih:</span>
                                    <span class="font-bold text-purple-700">Rp 28.550.000</span>
                                </div>
                            </div>
                        </div>

                        <!-- Ekuitas -->
                        <div class="bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                            <h4 class="text-xl font-bold text-yellow-800 mb-4">üèõÔ∏è Laporan Perubahan Ekuitas</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>Modal Awal Tahun:</span>
                                    <span class="font-bold">Rp 465.250.000</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Laba Bersih Periode:</span>
                                    <span class="font-bold text-green-600">Rp 34.750.000</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Dividen Dibayar:</span>
                                    <span class="font-bold text-red-600">Rp 0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Penambahan Modal:</span>
                                    <span class="font-bold text-green-600">Rp 0</span>
                                </div>
                                <hr class="my-2 border-yellow-300">
                                <div class="flex justify-between text-lg">
                                    <span class="font-bold">Modal Akhir Periode:</span>
                                    <span class="font-bold text-yellow-700">Rp 500.000.000</span>
                                </div>
                                <div class="text-sm text-yellow-600 mt-2">
                                    Pertumbuhan Ekuitas: 7.47%
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ringkasan Rasio Keuangan -->
                    <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                        <h4 class="text-xl font-bold text-gray-800 mb-4">üìä Analisis Rasio Keuangan</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-600">62.6%</div>
                                <div class="text-sm text-gray-600">Margin Laba</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-600">6.95%</div>
                                <div class="text-sm text-gray-600">ROI</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600">6.0x</div>
                                <div class="text-sm text-gray-600">Current Ratio</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-yellow-600">83.3%</div>
                                <div class="text-sm text-gray-600">Equity Ratio</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <p class="text-gray-300">¬© 2024 BUMDes Cikahuripan Makmur Mandiri Sejahtera Cikahuripan (CMMSC) - Sistem Laporan CMMS</p>
            <p class="text-gray-400 text-sm mt-2">Desa Cikahuripan, Kec. Klapanunggal, Kab. Bogor - Jawa Barat</p>
            <p class="text-gray-400 text-sm">üìß cmms.cikahuripan@gmail.com | üì± 082125415593</p>
        </div>
    </footer>

    <script>
        // Global variables
        let currentUser = null;
        let reportData = JSON.parse(localStorage.getItem('bumdesReports')) || {};

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Sistem CMMS BUMDes CMMSC dimuat');
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('id-ID');
            
            // Auto-fill untuk testing
            setTimeout(() => {
                document.getElementById('username').value = 'direktur';
                document.getElementById('password').value = 'admin123';
                console.log('‚úÖ Auto-fill login untuk testing');
            }, 500);
        });

        // Login system - FIXED
        function handleLogin(event) {
            event.preventDefault();
            
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            
            if (!usernameInput || !passwordInput) {
                alert('‚ùå Error: Form login tidak ditemukan!');
                return;
            }
            
            const username = usernameInput.value.toLowerCase().trim();
            const password = passwordInput.value.trim();
            
            console.log('üîê Mencoba login:', username, '/', password);
            
            // Database user yang valid
            const validUsers = {
                'direktur': { 
                    password: 'admin123', 
                    role: 'direktur', 
                    name: 'Direktur BUMDes CMMSC',
                    access: 'all'
                },
                'internet': { 
                    password: 'unit123', 
                    role: 'unit', 
                    name: 'Unit Internet', 
                    unit: 'internet' 
                },
                'toko': { 
                    password: 'unit123', 
                    role: 'unit', 
                    name: 'Unit Toko', 
                    unit: 'toko' 
                },
                'kios': { 
                    password: 'unit123', 
                    role: 'unit', 
                    name: 'Unit Kios', 
                    unit: 'kios' 
                },
                'lapak': { 
                    password: 'unit123', 
                    role: 'unit', 
                    name: 'Unit Lapak', 
                    unit: 'lapak' 
                },
                'lapangan': { 
                    password: 'unit123', 
                    role: 'unit', 
                    name: 'Unit Lapangan', 
                    unit: 'lapangan' 
                },
                'sampah': { 
                    password: 'unit123', 
                    role: 'unit', 
                    name: 'Unit Sampah', 
                    unit: 'sampah' 
                },
                'ayam': { 
                    password: 'unit123', 
                    role: 'unit', 
                    name: 'Unit Ayam', 
                    unit: 'ayam' 
                }
            };
            
            // Validasi login
            if (validUsers[username] && validUsers[username].password === password) {
                currentUser = validUsers[username];
                currentUser.username = username;
                
                console.log('‚úÖ Login berhasil:', currentUser);
                
                // Sembunyikan modal login
                const loginModal = document.getElementById('loginModal');
                const mainContent = document.getElementById('mainContent');
                const userInfo = document.getElementById('userInfo');
                const demoBtn = document.getElementById('demoBtn');
                
                if (loginModal) loginModal.style.display = 'none';
                if (mainContent) mainContent.style.display = 'block';
                if (userInfo) userInfo.textContent = currentUser.name;
                
                // Tampilkan tombol demo akun hanya untuk direktur
                if (currentUser.role === 'direktur' && demoBtn) {
                    demoBtn.style.display = 'block';
                }
                
                // Setup navigasi dan tampilkan dashboard
                setupNavigation();
                showContent('summary');
                
                // Notifikasi berhasil
                setTimeout(() => {
                    alert('üéâ Login berhasil!\nSelamat datang ' + currentUser.name);
                }, 100);
                
            } else {
                console.log('‚ùå Login gagal untuk:', username);
                alert('‚ùå Username atau password salah!\n\nSilakan hubungi administrator untuk mendapatkan akses login.');
            }
        }

        // Show demo accounts - hanya untuk direktur
        function showDemoAccounts() {
            const demoAccounts = document.getElementById('demoAccounts');
            if (demoAccounts.classList.contains('hidden')) {
                demoAccounts.classList.remove('hidden');
            } else {
                demoAccounts.classList.add('hidden');
            }
        }

        // Setup navigation menu - FIXED
        function setupNavigation() {
            const navigationMenu = document.getElementById('navigationMenu');
            if (!navigationMenu) return;
            
            navigationMenu.innerHTML = '';
            
            let menus = [];
            
            if (currentUser.role === 'direktur') {
                // Direktur bisa akses semua + panel admin
                menus = [
                    { id: 'summary', icon: 'üìä', title: 'Dashboard', desc: 'Ringkasan semua unit' },
                    { id: 'adminPanel', icon: '‚öôÔ∏è', title: 'Panel Admin', desc: 'Kelola sistem & data' },
                    { id: 'laporanKeuangan', icon: 'üí∞', title: 'Laporan Keuangan', desc: 'Neraca & Laba Rugi' },
                    { id: 'internet', icon: 'üåê', title: 'Unit Internet', desc: 'Laporan unit internet' },
                    { id: 'toko', icon: 'üè™', title: 'Unit Toko', desc: 'Laporan unit toko' },
                    { id: 'kios', icon: 'üè¨', title: 'Unit Kios', desc: 'Laporan penyewaan kios' },
                    { id: 'lapak', icon: 'üõí', title: 'Unit Lapak', desc: 'Laporan penyewaan lapak' },
                    { id: 'lapangan', icon: '‚öΩ', title: 'Unit Lapangan', desc: 'Laporan penyewaan lapangan' },
                    { id: 'sampah', icon: '‚ôªÔ∏è', title: 'Unit Sampah', desc: 'Laporan pengelolaan sampah' },
                    { id: 'ayam', icon: 'üêî', title: 'Unit Ayam', desc: 'Laporan peternakan ayam' }
                ];
            } else {
                // Unit hanya bisa akses unitnya sendiri
                menus = [
                    { id: 'summary', icon: 'üìä', title: 'Dashboard', desc: 'Ringkasan unit' },
                    { id: currentUser.unit, icon: getUnitIcon(currentUser.unit), title: currentUser.name, desc: 'Laporan unit Anda' }
                ];
            }
            
            menus.forEach(menu => {
                const menuButton = createMenuButton(menu.id, menu.icon, menu.title, menu.desc);
                navigationMenu.appendChild(menuButton);
            });
            
            console.log('‚úÖ Navigasi berhasil dibuat dengan', menus.length, 'menu');
        }

        // Create menu button - FIXED
        function createMenuButton(id, icon, title, desc) {
            const button = document.createElement('button');
            button.className = 'bg-gray-50 hover:bg-blue-50 p-4 rounded-lg text-left transition-colors border hover:border-blue-200 w-full';
            button.onclick = () => {
                console.log('üñ±Ô∏è Menu diklik:', id);
                showContent(id);
            };
            button.innerHTML = `
                <div class="text-2xl mb-2">${icon}</div>
                <h3 class="font-semibold text-gray-800 text-sm">${title}</h3>
                <p class="text-xs text-gray-600">${desc}</p>
            `;
            return button;
        }

        // Get unit icon
        function getUnitIcon(unit) {
            const icons = {
                'internet': 'üåê',
                'toko': 'üè™', 
                'kios': 'üè¨',
                'lapak': 'üõí',
                'lapangan': '‚öΩ',
                'sampah': '‚ôªÔ∏è',
                'ayam': 'üêî'
            };
            return icons[unit] || 'üìã';
        }

        // Show content - COMPLETELY FIXED
        function showContent(contentId) {
            console.log('üìÑ Menampilkan konten:', contentId);
            
            // Sembunyikan semua konten
            const allContents = document.querySelectorAll('.unit-content');
            allContents.forEach(content => {
                content.classList.add('hidden');
            });
            
            // Tampilkan konten yang dipilih
            const selectedContent = document.getElementById(contentId);
            if (selectedContent) {
                selectedContent.classList.remove('hidden');
                console.log('‚úÖ Konten berhasil ditampilkan:', contentId);
            } else {
                console.log('‚ùå Konten tidak ditemukan:', contentId);
                // Fallback ke summary
                const summaryContent = document.getElementById('summary');
                if (summaryContent) {
                    summaryContent.classList.remove('hidden');
                    console.log('‚úÖ Fallback ke summary');
                }
            }
            
            // Initialize charts untuk dashboard
            if (contentId === 'summary') {
                setTimeout(initializeCharts, 200);
            }
        }

        // Initialize charts
        function initializeCharts() {
            const chartCanvas = document.getElementById('revenueChart');
            if (chartCanvas && !chartCanvas.chartInstance) {
                try {
                    chartCanvas.chartInstance = new Chart(chartCanvas, {
                        type: 'bar',
                        data: {
                            labels: ['Internet', 'Toko', 'Kios', 'Lapak', 'Lapangan', 'Sampah', 'Ayam'],
                            datasets: [{
                                label: 'Pendapatan (Juta Rp)',
                                data: [12.5, 8.75, 6.0, 3.3, 4.5, 5.2, 15.5],
                                backgroundColor: [
                                    '#3B82F6', '#10B981', '#8B5CF6', '#F59E0B',
                                    '#EF4444', '#06B6D4', '#F97316'
                                ],
                                borderRadius: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: true,
                                    position: 'top'
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'Pendapatan (Juta Rp)'
                                    }
                                }
                            }
                        }
                    });
                    console.log('üìä Chart berhasil diinisialisasi');
                } catch (error) {
                    console.log('‚ùå Error membuat chart:', error);
                }
            }
        }

        // Admin Panel Functions
        function showUserManagement() {
            const adminContent = document.getElementById('adminContentArea');
            adminContent.innerHTML = `
                <h4 class="text-xl font-bold mb-4">üë• Kelola User</h4>
                <div class="bg-white p-6 rounded-lg">
                    <div class="mb-4">
                        <button onclick="addNewUser()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg mr-2">
                            ‚ûï Tambah User Baru
                        </button>
                        <button onclick="resetUserPassword()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg">
                            üîë Reset Password
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="border border-gray-300 p-2">Username</th>
                                    <th class="border border-gray-300 p-2">Nama</th>
                                    <th class="border border-gray-300 p-2">Role</th>
                                    <th class="border border-gray-300 p-2">Status</th>
                                    <th class="border border-gray-300 p-2">Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td class="border border-gray-300 p-2">direktur</td><td class="border border-gray-300 p-2">Direktur BUMDes CMMSC</td><td class="border border-gray-300 p-2">Admin</td><td class="border border-gray-300 p-2">‚úÖ Aktif</td><td class="border border-gray-300 p-2"><button class="bg-blue-500 text-white px-2 py-1 rounded text-sm">Edit</button></td></tr>
                                <tr><td class="border border-gray-300 p-2">internet</td><td class="border border-gray-300 p-2">Unit Internet</td><td class="border border-gray-300 p-2">Unit</td><td class="border border-gray-300 p-2">‚úÖ Aktif</td><td class="border border-gray-300 p-2"><button class="bg-blue-500 text-white px-2 py-1 rounded text-sm">Edit</button></td></tr>
                                <tr><td class="border border-gray-300 p-2">toko</td><td class="border border-gray-300 p-2">Unit Toko</td><td class="border border-gray-300 p-2">Unit</td><td class="border border-gray-300 p-2">‚úÖ Aktif</td><td class="border border-gray-300 p-2"><button class="bg-blue-500 text-white px-2 py-1 rounded text-sm">Edit</button></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function showFinanceEditor() {
            const adminContent = document.getElementById('adminContentArea');
            adminContent.innerHTML = `
                <h4 class="text-xl font-bold mb-4">üí∞ Edit Data Keuangan</h4>
                <div class="bg-white p-6 rounded-lg">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h5 class="font-semibold mb-3">Pendapatan per Unit</h5>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span>Internet:</span>
                                    <input type="number" value="12500000" class="border rounded px-2 py-1 w-32">
                                </div>
                                <div class="flex justify-between items-center">
                                    <span>Toko:</span>
                                    <input type="number" value="8750000" class="border rounded px-2 py-1 w-32">
                                </div>
                                <div class="flex justify-between items-center">
                                    <span>Ayam:</span>
                                    <input type="number" value="15500000" class="border rounded px-2 py-1 w-32">
                                </div>
                            </div>
                        </div>
                        <div>
                            <h5 class="font-semibold mb-3">Biaya Operasional</h5>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span>Maintenance:</span>
                                    <input type="number" value="8250000" class="border rounded px-2 py-1 w-32">
                                </div>
                                <div class="flex justify-between items-center">
                                    <span>Operasional:</span>
                                    <input type="number" value="12500000" class="border rounded px-2 py-1 w-32">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <button onclick="saveFinanceData()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg">
                            üíæ Simpan Perubahan
                        </button>
                    </div>
                </div>
            `;
        }

        // FIXED: Pengaturan Laporan
        function showReportSettings() {
            const adminContent = document.getElementById('adminContentArea');
            adminContent.innerHTML = `
                <h4 class="text-xl font-bold mb-4">‚öôÔ∏è Pengaturan Laporan</h4>
                <div class="bg-white p-6 rounded-lg">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-800 mb-3">Format Laporan</h5>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Template Laporan:</label>
                                    <select class="w-full border rounded px-3 py-2">
                                        <option>Template Standar BUMDes</option>
                                        <option>Template Kementerian Desa</option>
                                        <option>Template Custom</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Periode Laporan:</label>
                                    <select class="w-full border rounded px-3 py-2">
                                        <option>Bulanan</option>
                                        <option>Triwulan</option>
                                        <option>Semester</option>
                                        <option>Tahunan</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" checked class="mr-2">
                                        <span class="text-sm">Auto-generate laporan bulanan</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-800 mb-3">Distribusi Laporan</h5>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Email Penerima:</label>
                                    <textarea class="w-full border rounded px-3 py-2 h-20" placeholder="direktur@bumdes.com&#10;kepala.desa@cikahuripan.go.id&#10;sekretaris@bumdes.com"></textarea>
                                </div>
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" checked class="mr-2">
                                        <span class="text-sm">Kirim otomatis setiap akhir bulan</span>
                                    </label>
                                </div>
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="mr-2">
                                        <span class="text-sm">Backup ke cloud storage</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-yellow-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-yellow-800 mb-3">Kustomisasi Laporan</h5>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Logo BUMDes</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Logo Desa</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">Grafik Pendapatan</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">Analisis Trend</span>
                            </label>
                        </div>
                    </div>
                    <div class="mt-6 flex space-x-4">
                        <button onclick="saveReportSettings()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg">
                            üíæ Simpan Pengaturan
                        </button>
                        <button onclick="previewReport()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg">
                            üëÅÔ∏è Preview Laporan
                        </button>
                    </div>
                </div>
            `;
        }

        // FIXED: Laporan Per Unit
        function showUnitReports() {
            const adminContent = document.getElementById('adminContentArea');
            adminContent.innerHTML = `
                <h4 class="text-xl font-bold mb-4">üìã Laporan Per Unit</h4>
                <div class="bg-white p-6 rounded-lg">
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">Pilih Unit Usaha:</label>
                        <select id="unitSelector" onchange="loadUnitReport()" class="border rounded px-3 py-2 w-full md:w-64">
                            <option value="">-- Pilih Unit --</option>
                            <option value="internet">üåê Unit Internet</option>
                            <option value="toko">üè™ Unit Toko</option>
                            <option value="kios">üè¨ Unit Kios</option>
                            <option value="lapak">üõí Unit Lapak</option>
                            <option value="lapangan">‚öΩ Unit Lapangan</option>
                            <option value="sampah">‚ôªÔ∏è Unit Sampah</option>
                            <option value="ayam">üêî Unit Ayam</option>
                        </select>
                    </div>
                    
                    <div id="unitReportContent" class="space-y-6">
                        <div class="text-center text-gray-500 py-8">
                            <p>Pilih unit usaha untuk melihat laporan detail</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // FIXED: Kelola Unit Usaha
        function showUnitManager() {
            const adminContent = document.getElementById('adminContentArea');
            adminContent.innerHTML = `
                <h4 class="text-xl font-bold mb-4">üè¢ Kelola Unit Usaha</h4>
                <div class="bg-white p-6 rounded-lg">
                    <div class="mb-6">
                        <button onclick="addNewUnit()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg mr-2">
                            ‚ûï Tambah Unit Baru
                        </button>
                        <button onclick="exportUnitData()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                            üìä Export Data Unit
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-semibold text-blue-800">üåê Unit Internet</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Aktif</span>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Pendapatan:</span>
                                    <span class="font-semibold">Rp 12.5M</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Pelanggan:</span>
                                    <span class="font-semibold">245 User</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Manager:</span>
                                    <span class="font-semibold">Budi Santoso</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button onclick="editUnit('internet')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">Edit</button>
                                <button onclick="viewUnitDetail('internet')" class="bg-gray-500 text-white px-3 py-1 rounded text-xs">Detail</button>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-semibold text-green-800">üè™ Unit Toko</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Aktif</span>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Omzet:</span>
                                    <span class="font-semibold">Rp 8.75M</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Produk:</span>
                                    <span class="font-semibold">1,234 Item</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Manager:</span>
                                    <span class="font-semibold">Siti Aminah</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button onclick="editUnit('toko')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">Edit</button>
                                <button onclick="viewUnitDetail('toko')" class="bg-gray-500 text-white px-3 py-1 rounded text-xs">Detail</button>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-semibold text-yellow-800">üêî Unit Ayam</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Aktif</span>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Pendapatan:</span>
                                    <span class="font-semibold">Rp 15.5M</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Populasi:</span>
                                    <span class="font-semibold">2,500 Ekor</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Manager:</span>
                                    <span class="font-semibold">Ahmad Yusuf</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button onclick="editUnit('ayam')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">Edit</button>
                                <button onclick="viewUnitDetail('ayam')" class="bg-gray-500 text-white px-3 py-1 rounded text-xs">Detail</button>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-semibold text-purple-800">üè¨ Unit Kios</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Aktif</span>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Sewa:</span>
                                    <span class="font-semibold">Rp 6.0M</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Okupansi:</span>
                                    <span class="font-semibold">12/15 Unit</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Manager:</span>
                                    <span class="font-semibold">Rina Sari</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button onclick="editUnit('kios')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">Edit</button>
                                <button onclick="viewUnitDetail('kios')" class="bg-gray-500 text-white px-3 py-1 rounded text-xs">Detail</button>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-semibold text-red-800">‚ôªÔ∏è Unit Sampah</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Aktif</span>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Pendapatan:</span>
                                    <span class="font-semibold">Rp 5.2M</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Sampah:</span>
                                    <span class="font-semibold">15.5 Ton</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Manager:</span>
                                    <span class="font-semibold">Joko Widodo</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button onclick="editUnit('sampah')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">Edit</button>
                                <button onclick="viewUnitDetail('sampah')" class="bg-gray-500 text-white px-3 py-1 rounded text-xs">Detail</button>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="font-semibold text-orange-800">‚öΩ Unit Lapangan</h5>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Aktif</span>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Sewa:</span>
                                    <span class="font-semibold">Rp 4.5M</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Booking:</span>
                                    <span class="font-semibold">180 Jam</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Manager:</span>
                                    <span class="font-semibold">Dedi Kurnia</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button onclick="editUnit('lapangan')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">Edit</button>
                                <button onclick="viewUnitDetail('lapangan')" class="bg-gray-500 text-white px-3 py-1 rounded text-xs">Detail</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showSystemMaintenance() {
            const adminContent = document.getElementById('adminContentArea');
            adminContent.innerHTML = `
                <h4 class="text-xl font-bold mb-4">üîß Maintenance Sistem</h4>
                <div class="bg-white p-6 rounded-lg">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-800 mb-3">Status Sistem</h5>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>Database:</span>
                                    <span class="text-green-600">‚úÖ Normal</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Server:</span>
                                    <span class="text-green-600">‚úÖ Online</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Storage:</span>
                                    <span class="text-yellow-600">‚ö†Ô∏è 78% Terpakai</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-red-800 mb-3">Maintenance Tools</h5>
                            <div class="space-y-2">
                                <button onclick="clearCache()" class="w-full bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm">
                                    üóëÔ∏è Clear Cache
                                </button>
                                <button onclick="optimizeDatabase()" class="w-full bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm">
                                    ‚ö° Optimize Database
                                </button>
                                <button onclick="checkSystemHealth()" class="w-full bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm">
                                    üè• System Health Check
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Load Unit Report Function
        function loadUnitReport() {
            const selector = document.getElementById('unitSelector');
            const content = document.getElementById('unitReportContent');
            const selectedUnit = selector.value;
            
            if (!selectedUnit) {
                content.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <p>Pilih unit usaha untuk melihat laporan detail</p>
                    </div>
                `;
                return;
            }
            
            const unitData = {
                'internet': {
                    name: 'üåê Unit Internet',
                    revenue: 'Rp 12.500.000',
                    customers: '245 User',
                    bandwidth: '78%',
                    manager: 'Budi Santoso'
                },
                'toko': {
                    name: 'üè™ Unit Toko',
                    revenue: 'Rp 8.750.000',
                    products: '1,234 Item',
                    margin: '25%',
                    manager: 'Siti Aminah'
                },
                'ayam': {
                    name: 'üêî Unit Ayam',
                    revenue: 'Rp 15.500.000',
                    population: '2,500 Ekor',
                    eggs: '1,800/Hari',
                    manager: 'Ahmad Yusuf'
                }
            };
            
            const data = unitData[selectedUnit] || unitData['internet'];
            
            content.innerHTML = `
                <div class="bg-blue-50 p-6 rounded-lg">
                    <h5 class="text-xl font-bold text-blue-800 mb-4">${data.name} - Laporan Detail</h5>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg">
                            <h6 class="font-semibold text-gray-700">Pendapatan</h6>
                            <p class="text-2xl font-bold text-green-600">${data.revenue}</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <h6 class="font-semibold text-gray-700">Metrik Utama</h6>
                            <p class="text-2xl font-bold text-blue-600">${data.customers || data.products || data.population}</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg">
                            <h6 class="font-semibold text-gray-700">Efisiensi</h6>
                            <p class="text-2xl font-bold text-purple-600">${data.bandwidth || data.margin || data.eggs}</p>
                        </div>
                    </div>
                    <div class="mt-6 bg-white p-4 rounded-lg">
                        <h6 class="font-semibold text-gray-700 mb-2">Manager Unit</h6>
                        <p class="text-lg">${data.manager}</p>
                    </div>
                </div>
            `;
        }

        // Admin helper functions
        function addNewUser() {
            alert('üîß Fitur Tambah User Baru akan segera tersedia!');
        }

        function resetUserPassword() {
            alert('üîë Fitur Reset Password akan segera tersedia!');
        }

        function saveFinanceData() {
            alert('üíæ Data keuangan berhasil disimpan!');
        }

        function saveReportSettings() {
            alert('üíæ Pengaturan laporan berhasil disimpan!');
        }

        function previewReport() {
            alert('üëÅÔ∏è Preview laporan akan segera tersedia!');
        }

        function addNewUnit() {
            alert('‚ûï Fitur Tambah Unit Baru akan segera tersedia!');
        }

        function exportUnitData() {
            alert('üìä Export data unit akan segera tersedia!');
        }

        function editUnit(unit) {
            alert(`‚úèÔ∏è Edit Unit ${unit} akan segera tersedia!`);
        }

        function viewUnitDetail(unit) {
            alert(`üëÅÔ∏è Detail Unit ${unit} akan segera tersedia!`);
        }

        function clearCache() {
            alert('üóëÔ∏è Cache sistem berhasil dibersihkan!');
        }

        function optimizeDatabase() {
            alert('‚ö° Database berhasil dioptimasi!');
        }

        function checkSystemHealth() {
            alert('üè• Sistem dalam kondisi sehat! Semua komponen berjalan normal.');
        }

        function showUserActivity() {
            alert('üìä Fitur Log Aktivitas User akan segera tersedia!');
        }

        function showAnalytics() {
            alert('üìä Fitur Dashboard Analytics akan segera tersedia!');
        }

        function showCustomReports() {
            alert('üìÑ Fitur Custom Reports akan segera tersedia!');
        }

        function showSystemSettings() {
            alert('‚öôÔ∏è Fitur Pengaturan Sistem akan segera tersedia!');
        }

        function showSecuritySettings() {
            alert('üîí Fitur Keamanan Sistem akan segera tersedia!');
        }

        function showBackupRestore() {
            alert('üíæ Fitur Backup & Restore akan segera tersedia!');
        }

        // Logout function
        function logout() {
            if (confirm('üö™ Yakin ingin logout dari sistem?')) {
                console.log('üëã User logout');
                currentUser = null;
                
                // Reset tampilan
                document.getElementById('loginModal').style.display = 'flex';
                document.getElementById('mainContent').style.display = 'none';
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                document.getElementById('demoAccounts').classList.add('hidden');
                
                // Clear navigation
                const navigationMenu = document.getElementById('navigationMenu');
                if (navigationMenu) {
                    navigationMenu.innerHTML = '';
                }
                
                alert('üëã Anda telah logout. Terima kasih!');
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'976c9b71064c273f',t:'MTc1NjQ3NjM2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
